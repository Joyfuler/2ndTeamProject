<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.project.adventure.repository.CartDao">
	<resultMap type="Cart" id="CartResult">
		<result property="cid" column="cid"/>
		<result property="p1" column="p1"/>
		<result property="p2" column="p2"/>
		<result property="type" column="type"/>
		<result property="atname1" column="atname1"/>
		<result property="atname2" column="atname2"/>
		<result property="atname3" column="atname3"/>
		<result property="price1" column="price1"/>
		<result property="price2" column="price2"/>
		<result property="result" column="result"/>
		<result property="crdate" column="crdate"/>
		<result property="visitdate" column="visitdate"/>
		<result property="mid" column="mid"/>
	</resultMap>
	<select id="cartList" parameterType="Cart" resultMap="CartResult">
		SELECT * FROM CART ORDER BY CRDATE
	</select>
	<select id="totCntCart" resultType="int">
		SELECT COUNT(*) FROM CART
	</select>
	<select id="getDetailCart" parameterType="int" resultType="Cart">
		SELECT*FROM CART WHERE CID=#{cid}
	</select>
	<insert id="registerCart" parameterType="Cart" >
		INSERT INTO CART( CID, p1, p2, TYPE, ATNAME1, ATNAME2, ATNAME3, PRICE1, PRICE2, RESULT, VISITDATE ,MID )
    values(cart_seq.NEXTVAL,#{p1},#{p2},#{type},#{atname1},#{atname2},#{atname3},#{price1},#{price2},#{result},#{visitdate},#{mid})
	</insert>
	<update id="modifyBCart" parameterType="Cart">
		UPDATE CART SET  
		       p1 = #{p1},
		       p2 =#{p2},
	           TYPE = #{type},
		       ATNAME1 = #{atname1},
		       ATNAME2 = #{atname2},
		       ATNAME3 = #{atname3},
		       PRICE1 = #{price1},
		       PRICE2 = #{price2},
		       RESULT = #{result},
		       VISITDATE = #{visitdate},
		       MID = #{mid}
		       WHERE CID=#{cid}
	</update>
	<delete id="deleteCart" parameterType="int">
    DELETE FROM CART WHERE CID =#{cid}
	</delete>
</mapper>